(function(){"use strict";var e={2366:function(e,i,t){var s=t(9242),l=t(3396);function r(e,i,t,s,r,h){const a=(0,l.up)("game");return(0,l.wg)(),(0,l.j4)(a)}var h=t(7139);const a={class:"info"},n=(0,l._)("div",{class:"name"},"2048*",-1),f={class:"score_wrap",style:{"grid-area":"score"}},o=(0,l._)("span",null," score ",-1),d={class:"score_wrap",style:{"grid-area":"best"}},c=(0,l._)("span",null," best ",-1),u={class:"buttons",style:{"grid-area":"btn"}},_={class:"container"},p=(0,l._)("span",null,"Game over",-1),g={class:"game_row"};function w(e,i,t,r,w,m){const v=(0,l.up)("cell");return(0,l.wg)(),(0,l.iD)("div",{class:"wrap",onKeyup:[i[4]||(i[4]=(0,s.D2)((e=>m.swipe_left(!0)),["left"])),i[5]||(i[5]=(0,s.D2)((e=>m.swipe_right(!0)),["right"])),i[6]||(i[6]=(0,s.D2)((e=>m.swipe_up(!0)),["up"])),i[7]||(i[7]=(0,s.D2)((e=>m.swipe_down(!0)),["down"]))],tabindex:"0"},[(0,l._)("div",a,[n,(0,l._)("div",f,[o,(0,l._)("span",null,(0,h.zw)(w.cur_score),1)]),(0,l._)("div",d,[c,(0,l._)("span",null,(0,h.zw)(w.score),1)]),(0,l._)("div",u,[(0,l._)("button",{onClick:i[0]||(i[0]=(...e)=>m.reset&&m.reset(...e))},"new game"),(0,l._)("button",{onClick:i[1]||(i[1]=(...e)=>m.make_backup&&m.make_backup(...e))},"back"),(0,l._)("button",{onClick:i[2]||(i[2]=(...e)=>m.switch_theme&&m.switch_theme(...e))},"switch theme")])]),(0,l._)("div",_,[(0,l._)("div",{class:(0,h.C_)(["game_over",{visible:w.isGameOver}])},[p,(0,l._)("span",null,"Your score: "+(0,h.zw)(w.score),1),(0,l._)("button",{onClick:i[3]||(i[3]=(...e)=>m.reset&&m.reset(...e))},"new game")],2),((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(w.field,(e=>((0,l.wg)(),(0,l.iD)("div",g,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(e,(e=>((0,l.wg)(),(0,l.j4)(v,{class:"game_block",value:e,classic_style:this.classic_style},null,8,["value","classic_style"])))),256))])))),256))])],32)}t(7658);function m(e,i,t,s,r,a){return(0,l.wg)(),(0,l.iD)("div",{class:"cell",style:(0,h.j5)(this.classic_style?{backgroundColor:a.computed_bg}:{border:`solid ${a.computed_bg} 5px`,color:a.computed_bg})},(0,h.zw)(this.formatted_val),5)}var v={name:"Cell",props:{value:Number,classic_style:!1},data(){return{color_scheme:{2:"(238, 228, 218)",4:"(250, 184, 132)",8:"(255, 150, 112)",16:"(250, 128, 115)",32:"(252, 117, 83)",64:"(247, 109, 109)",128:"(255, 246, 115)"}}},computed:{formatted_val(){return 0==this.value?"":this.value},computed_bg(){return""==this.formatted_val?"rgba(238, 228, 218, 0.35)":this.formatted_val>=128?`rgba${this.color_scheme[128]}`:`rgba${this.color_scheme[this.formatted_val]}`}}},b=t(89);const y=(0,b.Z)(v,[["render",m]]);var k=y,O={name:"Game",components:{Cell:k},data(){return{field:[[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]],backup:[],filled_size:0,score:2,cur_score:2,isGameOver:!1,classic_style:!0}},methods:{is_game_over(){let e=this.copy_array(this.field),i=this.filled_size;this.swipe_down(!1),this.swipe_left(!1),this.swipe_right(!1),this.swipe_up(!1),this.compare_arrays(e,this.field)?setTimeout((()=>{this.isGameOver=!0}),200):(this.field=this.copy_array(e),this.filled_size=i)},generate_new(){let e=!0,i=[2,4];while(e){let t=Math.floor(4*Math.random()),s=Math.floor(4*Math.random());0==this.field[t][s]&&(this.field[t][s]=i[Math.floor(Math.random())],e=!1,this.filled_size+=1,16==this.filled_size&&this.is_game_over())}},swipe_up(e){let i=this.copy_array(this.field),t=new Map;for(let s=0;s<this.field.length;s++)for(let e=0;e<this.field.length;e++)if(0!=this.field[e][s]){let i=e-1;while(i>0&&0==this.field[i][s])i--;i>=0&&this.field[i][s]==this.field[e][s]&&!t.has(""+i+s)?(this.field[i][s]*=2,this.field[i][s]>this.cur_score&&(this.cur_score=this.field[i][s]),this.field[i][s]>this.score&&(this.score=this.field[i][s]),this.filled_size-=1,t.set(""+i+s,1),this.field[e][s]=0):i>=0&&0==this.field[i][s]?(this.field[i][s]=this.field[e][s],this.field[e][s]=0):i>=0&&i!==e-1&&(this.field[i+1][s]=this.field[e][s],this.field[e][s]=0)}e&&!this.compare_arrays(i,this.field)&&(this.backup=i,this.generate_new())},swipe_left(e){let i=this.copy_array(this.field),t=new Map;for(let s=0;s<this.field.length;s++)for(let e=0;e<this.field[s].length;e++)if(0!=this.field[s][e]){let i=e-1;while(i>0&&0==this.field[s][i])i--;i>=0&&this.field[s][i]==this.field[s][e]&&!t.has(""+i+s)?(this.field[s][i]*=2,this.field[s][i]>this.cur_score&&(this.cur_score=this.field[s][i]),this.field[s][i]>this.score&&(this.score=this.field[s][i]),this.filled_size-=1,t.set(""+i+s,1),this.field[s][e]=0):i>=0&&0==this.field[s][i]?(this.field[s][i]=this.field[s][e],this.field[s][e]=0):i>=0&&i!==e-1&&(this.field[s][i+1]=this.field[s][e],this.field[s][e]=0)}e&&!this.compare_arrays(i,this.field)&&(this.backup=i,this.generate_new())},swipe_right(e){let i=this.copy_array(this.field),t=new Map;for(let s=0;s<this.field.length;s++)for(let e=this.field[s].length-1;e>=0;e--)if(0!=this.field[s][e]){let i=e+1;while(i<this.field[s].length-1&&0==this.field[s][i])i++;i<=this.field[s].length-1&&this.field[s][i]==this.field[s][e]&&!t.has(""+i+s)?(this.field[s][i]*=2,this.field[s][i]>this.cur_score&&(this.cur_score=this.field[s][i]),this.field[s][i]>this.score&&(this.score=this.field[s][i]),this.filled_size-=1,t.set(""+i+s,1),this.field[s][e]=0):i<this.field[s].length&&0==this.field[s][i]?(this.field[s][i]=this.field[s][e],this.field[s][e]=0):i<this.field[s].length&&i!==e+1&&(this.field[s][i-1]=this.field[s][e],this.field[s][e]=0)}e&&!this.compare_arrays(i,this.field)&&(this.backup=i,this.generate_new())},swipe_down(e){let i=this.copy_array(this.field),t=new Map;for(let s=0;s<this.field.length;s++)for(let e=this.field.length-1;e>=0;e--)if(0!=this.field[e][s]){let i=e+1;while(i<this.field.length-1&&0==this.field[i][s])i++;i<=this.field.length-1&&this.field[i][s]==this.field[e][s]&&!t.has(""+i+s)?(this.field[i][s]*=2,this.field[i][s]>this.cur_score&&(this.cur_score=this.field[i][s]),this.field[i][s]>this.score&&(this.score=this.field[i][s]),this.filled_size-=1,t.set(""+i+s,1),this.field[e][s]=0):i<this.field.length&&0==this.field[i][s]?(this.field[i][s]=this.field[e][s],this.field[e][s]=0):i<this.field.length&&i!==e+1&&(this.field[i-1][s]=this.field[e][s],this.field[e][s]=0)}e&&!this.compare_arrays(i,this.field)&&(this.backup=i,this.generate_new())},reset(){this.isGameOver=!1,this.field=[[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]],this.filled_size=0,this.cur_score=2,this.start()},copy_array(e){let i=[];for(let t of e)i.push(t.slice(0));return i},compare_arrays(e,i){if(e.length!==i.length)return!1;for(let t=0;t<4;t++)for(let s=0;s<4;s++)if(e[t][s]!==i[t][s])return!1;return!0},make_backup(){this.field=this.copy_array(this.backup)},start(){for(let e=0;e<2;e++)this.generate_new();this.backup=this.copy_array(this.field)},switch_theme(){this.classic_style=!this.classic_style}},mounted(){this.start()}};const z=(0,b.Z)(O,[["render",w]]);var M=z,C={name:"App",components:{Game:M}};const j=(0,b.Z)(C,[["render",r]]);var D=j;(0,s.ri)(D).mount("#app")}},i={};function t(s){var l=i[s];if(void 0!==l)return l.exports;var r=i[s]={exports:{}};return e[s].call(r.exports,r,r.exports,t),r.exports}t.m=e,function(){var e=[];t.O=function(i,s,l,r){if(!s){var h=1/0;for(o=0;o<e.length;o++){s=e[o][0],l=e[o][1],r=e[o][2];for(var a=!0,n=0;n<s.length;n++)(!1&r||h>=r)&&Object.keys(t.O).every((function(e){return t.O[e](s[n])}))?s.splice(n--,1):(a=!1,r<h&&(h=r));if(a){e.splice(o--,1);var f=l();void 0!==f&&(i=f)}}return i}r=r||0;for(var o=e.length;o>0&&e[o-1][2]>r;o--)e[o]=e[o-1];e[o]=[s,l,r]}}(),function(){t.n=function(e){var i=e&&e.__esModule?function(){return e["default"]}:function(){return e};return t.d(i,{a:i}),i}}(),function(){t.d=function(e,i){for(var s in i)t.o(i,s)&&!t.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:i[s]})}}(),function(){t.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){t.o=function(e,i){return Object.prototype.hasOwnProperty.call(e,i)}}(),function(){var e={143:0};t.O.j=function(i){return 0===e[i]};var i=function(i,s){var l,r,h=s[0],a=s[1],n=s[2],f=0;if(h.some((function(i){return 0!==e[i]}))){for(l in a)t.o(a,l)&&(t.m[l]=a[l]);if(n)var o=n(t)}for(i&&i(s);f<h.length;f++)r=h[f],t.o(e,r)&&e[r]&&e[r][0](),e[r]=0;return t.O(o)},s=self["webpackChunkapp"]=self["webpackChunkapp"]||[];s.forEach(i.bind(null,0)),s.push=i.bind(null,s.push.bind(s))}();var s=t.O(void 0,[998],(function(){return t(2366)}));s=t.O(s)})();
//# sourceMappingURL=app.4b396648.js.map